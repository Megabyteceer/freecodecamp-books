<!DOCTYPE html>

<html ng-app="voteApp">

	<head>
		<title>poll-a-geddon.</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
		<link href="/public/css/main.css" rel="stylesheet" type="text/css">
		<meta name="google-signin-client_id" content="933940321357-nk2uvvdsirhvb45b20t37agtkekftre4.apps.googleusercontent.com">
		<link rel="SHORTCUT ICON" href="favicon.ico" type="image/x-icon">
		<link rel="icon" type="image/ico" href="favicon.ico">
	</head>

	<body>
		
		<app-title></app-title>
		
		<div class="container">
			<div class="row">
				<div class="text-center">
					<a href="/auth/github">
						<div class="btn" id="login-btn">
							<img src="/public/img/github_32px.png" alt="github logo" />
							<p>LOGIN WITH GITHUB</p>
						</div>
					</a>
					
					<div id="signinButton">
					  <span class="g-signin"
					    data-scope="https://www.googleapis.com/auth/plus.login"
					    data-clientid="933940321357-nk2uvvdsirhvb45b20t37agtkekftre4.apps.googleusercontent.com"
					    data-redirecturi="postmessage"
					    data-accesstype="offline"
					    data-cookiepolicy="none"
					    data-callback="signInCallback">
					  </span>
					</div>
					<div id="result"></div>
				</div>
			</div>
		</div>
		
		
	
			
		<script type="text/javascript">

			function signInCallback(authResult) {
			  if (authResult.code) {
			  	$.ajax({
				  type: "POST",
				  url: 	'/auth/google/callback',
				  data: JSON.stringify({ "code": authResult.code}),
				  success: function(data) {
				  	gapi.auth.signOut()
			      	//document.location.href="/";
			      	
			      },
			      contentType: 'application/json; charset=utf-8',
				  dataType: 'json'
				});
			  } else if (authResult.error) {
			    console.log('There was an error: ' + authResult.error);
			  }
			};

		</script>
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
		<script src="https://apis.google.com/js/platform.js" async defer></script>
		<script src="controllers/voteApp.js"></script>

		
		
	</body>

</html>